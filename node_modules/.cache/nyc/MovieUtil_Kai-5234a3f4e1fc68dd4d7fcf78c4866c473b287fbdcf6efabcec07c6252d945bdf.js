function cov_1e7o1hrajv(){var path="C:\\Users\\siahq_8ml8ib6\\OneDrive\\TP Year 2 Sem 2\\DevOps\\DevOps-G2-HuiQi\\utils\\MovieUtil_Kai.js";var hash="cb12520b8f66c022903821931903b90d7850b40e";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\siahq_8ml8ib6\\OneDrive\\TP Year 2 Sem 2\\DevOps\\DevOps-G2-HuiQi\\utils\\MovieUtil_Kai.js",statementMap:{"0":{start:{line:1,column:11},end:{line:1,column:33}},"1":{start:{line:4,column:4},end:{line:7,column:52}},"2":{start:{line:5,column:21},end:{line:5,column:56}},"3":{start:{line:6,column:8},end:{line:6,column:32}},"4":{start:{line:7,column:20},end:{line:7,column:39}},"5":{start:{line:7,column:40},end:{line:7,column:50}},"6":{start:{line:11,column:4},end:{line:16,column:5}},"7":{start:{line:12,column:26},end:{line:12,column:61}},"8":{start:{line:13,column:8},end:{line:13,column:47}},"9":{start:{line:15,column:8},end:{line:15,column:64}},"10":{start:{line:20,column:4},end:{line:25,column:5}},"11":{start:{line:21,column:26},end:{line:21,column:60}},"12":{start:{line:22,column:8},end:{line:22,column:47}},"13":{start:{line:24,column:8},end:{line:24,column:64}},"14":{start:{line:29,column:4},end:{line:44,column:5}},"15":{start:{line:30,column:22},end:{line:30,column:35}},"16":{start:{line:31,column:26},end:{line:31,column:61}},"17":{start:{line:34,column:30},end:{line:34,column:78}},"18":{start:{line:34,column:56},end:{line:34,column:77}},"19":{start:{line:37,column:8},end:{line:41,column:9}},"20":{start:{line:38,column:12},end:{line:38,column:55}},"21":{start:{line:40,column:12},end:{line:40,column:88}},"22":{start:{line:43,column:8},end:{line:43,column:64}},"23":{start:{line:47,column:0},end:{line:49,column:1}}},fnMap:{"0":{name:"readJSON",decl:{start:{line:3,column:15},end:{line:3,column:23}},loc:{start:{line:3,column:34},end:{line:8,column:1}},line:3},"1":{name:"viewMoviesKai",decl:{start:{line:10,column:15},end:{line:10,column:28}},loc:{start:{line:10,column:39},end:{line:17,column:1}},line:10},"2":{name:"getGenresKai",decl:{start:{line:19,column:15},end:{line:19,column:27}},loc:{start:{line:19,column:38},end:{line:26,column:1}},line:19},"3":{name:"viewMovieByGenre",decl:{start:{line:28,column:15},end:{line:28,column:31}},loc:{start:{line:28,column:42},end:{line:45,column:1}},line:28},"4":{name:"(anonymous_4)",decl:{start:{line:34,column:47},end:{line:34,column:48}},loc:{start:{line:34,column:56},end:{line:34,column:77}},line:34}},branchMap:{"0":{loc:{start:{line:37,column:8},end:{line:41,column:9}},type:"if",locations:[{start:{line:37,column:8},end:{line:41,column:9}},{start:{line:39,column:15},end:{line:41,column:9}}],line:37}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cb12520b8f66c022903821931903b90d7850b40e"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1e7o1hrajv=function(){return actualCoverage;};}return actualCoverage;}cov_1e7o1hrajv();const fs=(cov_1e7o1hrajv().s[0]++,require('fs').promises);async function readJSON(filename){cov_1e7o1hrajv().f[0]++;cov_1e7o1hrajv().s[1]++;try{const data=(cov_1e7o1hrajv().s[2]++,await fs.readFile(filename,'utf8'));cov_1e7o1hrajv().s[3]++;return JSON.parse(data);}catch(err){cov_1e7o1hrajv().s[4]++;console.error(err);cov_1e7o1hrajv().s[5]++;throw err;}}async function viewMoviesKai(req,res){cov_1e7o1hrajv().f[1]++;cov_1e7o1hrajv().s[6]++;try{const allMovies=(cov_1e7o1hrajv().s[7]++,await readJSON('utils/movies.json'));cov_1e7o1hrajv().s[8]++;return res.status(201).json(allMovies);}catch(error){cov_1e7o1hrajv().s[9]++;return res.status(500).json({message:error.message});}}async function getGenresKai(req,res){cov_1e7o1hrajv().f[2]++;cov_1e7o1hrajv().s[10]++;try{const allGenres=(cov_1e7o1hrajv().s[11]++,await readJSON('utils/genre.json'));cov_1e7o1hrajv().s[12]++;return res.status(200).json(allGenres);}catch(error){cov_1e7o1hrajv().s[13]++;return res.status(500).json({message:error.message});}}async function viewMovieByGenre(req,res){cov_1e7o1hrajv().f[3]++;cov_1e7o1hrajv().s[14]++;try{const genre=(cov_1e7o1hrajv().s[15]++,req.params.id);// ID of the genre from the request URL
const allMovies=(cov_1e7o1hrajv().s[16]++,await readJSON('utils/movies.json'));// Adjust file path if necessary
// Filter movies by genre
const moviesByGenre=(cov_1e7o1hrajv().s[17]++,allMovies.filter(movie=>{cov_1e7o1hrajv().f[4]++;cov_1e7o1hrajv().s[18]++;return movie.genre===genre;}));// Check if any movies match the genre ID
cov_1e7o1hrajv().s[19]++;if(moviesByGenre.length>0){cov_1e7o1hrajv().b[0][0]++;cov_1e7o1hrajv().s[20]++;return res.status(200).json(moviesByGenre);}else{cov_1e7o1hrajv().b[0][1]++;cov_1e7o1hrajv().s[21]++;return res.status(404).json({message:'No movies found for this genre!'});}}catch(error){cov_1e7o1hrajv().s[22]++;return res.status(500).json({message:error.message});}}cov_1e7o1hrajv().s[23]++;module.exports={readJSON,viewMoviesKai,getGenresKai,viewMovieByGenre};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMWU3bzFocmFqdiIsImFjdHVhbENvdmVyYWdlIiwiZnMiLCJzIiwicmVxdWlyZSIsInByb21pc2VzIiwicmVhZEpTT04iLCJmaWxlbmFtZSIsImYiLCJkYXRhIiwicmVhZEZpbGUiLCJKU09OIiwicGFyc2UiLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJ2aWV3TW92aWVzS2FpIiwicmVxIiwicmVzIiwiYWxsTW92aWVzIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJnZXRHZW5yZXNLYWkiLCJhbGxHZW5yZXMiLCJ2aWV3TW92aWVCeUdlbnJlIiwiZ2VucmUiLCJwYXJhbXMiLCJpZCIsIm1vdmllc0J5R2VucmUiLCJmaWx0ZXIiLCJtb3ZpZSIsImxlbmd0aCIsImIiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiTW92aWVVdGlsX0thaS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJykucHJvbWlzZXM7XHJcblxyXG5hc3luYyBmdW5jdGlvbiByZWFkSlNPTihmaWxlbmFtZSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgZnMucmVhZEZpbGUoZmlsZW5hbWUsICd1dGY4Jyk7XHJcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoZGF0YSk7XHJcbiAgICB9IGNhdGNoIChlcnIpIHsgY29uc29sZS5lcnJvcihlcnIpOyB0aHJvdyBlcnI7IH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gdmlld01vdmllc0thaShyZXEsIHJlcykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBhbGxNb3ZpZXMgPSBhd2FpdCByZWFkSlNPTigndXRpbHMvbW92aWVzLmpzb24nKTtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDEpLmpzb24oYWxsTW92aWVzKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB9KTtcclxuICAgIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZ2V0R2VucmVzS2FpKHJlcSwgcmVzKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGFsbEdlbnJlcyA9IGF3YWl0IHJlYWRKU09OKCd1dGlscy9nZW5yZS5qc29uJyk7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKGFsbEdlbnJlcyk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHZpZXdNb3ZpZUJ5R2VucmUocmVxLCByZXMpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZ2VucmUgPSByZXEucGFyYW1zLmlkOyAgLy8gSUQgb2YgdGhlIGdlbnJlIGZyb20gdGhlIHJlcXVlc3QgVVJMXHJcbiAgICAgICAgY29uc3QgYWxsTW92aWVzID0gYXdhaXQgcmVhZEpTT04oJ3V0aWxzL21vdmllcy5qc29uJyk7ICAvLyBBZGp1c3QgZmlsZSBwYXRoIGlmIG5lY2Vzc2FyeVxyXG5cclxuICAgICAgICAvLyBGaWx0ZXIgbW92aWVzIGJ5IGdlbnJlXHJcbiAgICAgICAgY29uc3QgbW92aWVzQnlHZW5yZSA9IGFsbE1vdmllcy5maWx0ZXIobW92aWUgPT4gbW92aWUuZ2VucmUgPT09IGdlbnJlKTtcclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgYW55IG1vdmllcyBtYXRjaCB0aGUgZ2VucmUgSURcclxuICAgICAgICBpZiAobW92aWVzQnlHZW5yZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihtb3ZpZXNCeUdlbnJlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnTm8gbW92aWVzIGZvdW5kIGZvciB0aGlzIGdlbnJlIScgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgIHJlYWRKU09OLCB2aWV3TW92aWVzS2FpLCBnZXRHZW5yZXNLYWksIHZpZXdNb3ZpZUJ5R2VucmVcclxufSJdLCJtYXBwaW5ncyI6ImtrR0FlWTtBQUFBQSxjQUFBLFNBQUFBLENBQUEsU0FBQUMsY0FBQSxXQUFBQSxjQUFBLEVBQUFELGNBQUEsR0FmWixLQUFNLENBQUFFLEVBQUUsRUFBQUYsY0FBQSxHQUFBRyxDQUFBLE1BQUdDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQ0MsUUFBUSxFQUVqQyxjQUFlLENBQUFDLFFBQVFBLENBQUNDLFFBQVEsQ0FBRSxDQUFBUCxjQUFBLEdBQUFRLENBQUEsTUFBQVIsY0FBQSxHQUFBRyxDQUFBLE1BQzlCLEdBQUksQ0FDQSxLQUFNLENBQUFNLElBQUksRUFBQVQsY0FBQSxHQUFBRyxDQUFBLE1BQUcsS0FBTSxDQUFBRCxFQUFFLENBQUNRLFFBQVEsQ0FBQ0gsUUFBUSxDQUFFLE1BQU0sQ0FBQyxFQUFDUCxjQUFBLEdBQUFHLENBQUEsTUFDakQsTUFBTyxDQUFBUSxJQUFJLENBQUNDLEtBQUssQ0FBQ0gsSUFBSSxDQUFDLENBQzNCLENBQUUsTUFBT0ksR0FBRyxDQUFFLENBQUFiLGNBQUEsR0FBQUcsQ0FBQSxNQUFFVyxPQUFPLENBQUNDLEtBQUssQ0FBQ0YsR0FBRyxDQUFDLENBQUNiLGNBQUEsR0FBQUcsQ0FBQSxNQUFDLEtBQU0sQ0FBQVUsR0FBRyxDQUFFLENBQ25ELENBRUEsY0FBZSxDQUFBRyxhQUFhQSxDQUFDQyxHQUFHLENBQUVDLEdBQUcsQ0FBRSxDQUFBbEIsY0FBQSxHQUFBUSxDQUFBLE1BQUFSLGNBQUEsR0FBQUcsQ0FBQSxNQUNuQyxHQUFJLENBQ0EsS0FBTSxDQUFBZ0IsU0FBUyxFQUFBbkIsY0FBQSxHQUFBRyxDQUFBLE1BQUcsS0FBTSxDQUFBRyxRQUFRLENBQUMsbUJBQW1CLENBQUMsRUFBQ04sY0FBQSxHQUFBRyxDQUFBLE1BQ3RELE1BQU8sQ0FBQWUsR0FBRyxDQUFDRSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQ0YsU0FBUyxDQUFDLENBQzFDLENBQUUsTUFBT0osS0FBSyxDQUFFLENBQUFmLGNBQUEsR0FBQUcsQ0FBQSxNQUNaLE1BQU8sQ0FBQWUsR0FBRyxDQUFDRSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQyxDQUFFQyxPQUFPLENBQUVQLEtBQUssQ0FBQ08sT0FBUSxDQUFDLENBQUMsQ0FDM0QsQ0FDSixDQUVBLGNBQWUsQ0FBQUMsWUFBWUEsQ0FBQ04sR0FBRyxDQUFFQyxHQUFHLENBQUUsQ0FBQWxCLGNBQUEsR0FBQVEsQ0FBQSxNQUFBUixjQUFBLEdBQUFHLENBQUEsT0FDbEMsR0FBSSxDQUNBLEtBQU0sQ0FBQXFCLFNBQVMsRUFBQXhCLGNBQUEsR0FBQUcsQ0FBQSxPQUFHLEtBQU0sQ0FBQUcsUUFBUSxDQUFDLGtCQUFrQixDQUFDLEVBQUNOLGNBQUEsR0FBQUcsQ0FBQSxPQUNyRCxNQUFPLENBQUFlLEdBQUcsQ0FBQ0UsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUNHLFNBQVMsQ0FBQyxDQUMxQyxDQUFFLE1BQU9ULEtBQUssQ0FBRSxDQUFBZixjQUFBLEdBQUFHLENBQUEsT0FDWixNQUFPLENBQUFlLEdBQUcsQ0FBQ0UsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUMsQ0FBRUMsT0FBTyxDQUFFUCxLQUFLLENBQUNPLE9BQVEsQ0FBQyxDQUFDLENBQzNELENBQ0osQ0FFQSxjQUFlLENBQUFHLGdCQUFnQkEsQ0FBQ1IsR0FBRyxDQUFFQyxHQUFHLENBQUUsQ0FBQWxCLGNBQUEsR0FBQVEsQ0FBQSxNQUFBUixjQUFBLEdBQUFHLENBQUEsT0FDdEMsR0FBSSxDQUNBLEtBQU0sQ0FBQXVCLEtBQUssRUFBQTFCLGNBQUEsR0FBQUcsQ0FBQSxPQUFHYyxHQUFHLENBQUNVLE1BQU0sQ0FBQ0MsRUFBRSxFQUFHO0FBQzlCLEtBQU0sQ0FBQVQsU0FBUyxFQUFBbkIsY0FBQSxHQUFBRyxDQUFBLE9BQUcsS0FBTSxDQUFBRyxRQUFRLENBQUMsbUJBQW1CLENBQUMsRUFBRztBQUV4RDtBQUNBLEtBQU0sQ0FBQXVCLGFBQWEsRUFBQTdCLGNBQUEsR0FBQUcsQ0FBQSxPQUFHZ0IsU0FBUyxDQUFDVyxNQUFNLENBQUNDLEtBQUssRUFBSSxDQUFBL0IsY0FBQSxHQUFBUSxDQUFBLE1BQUFSLGNBQUEsR0FBQUcsQ0FBQSxjQUFBNEIsS0FBSyxDQUFDTCxLQUFLLEdBQUtBLEtBQUssQ0FBRCxDQUFDLENBQUMsRUFFdEU7QUFBQTFCLGNBQUEsR0FBQUcsQ0FBQSxPQUNBLEdBQUkwQixhQUFhLENBQUNHLE1BQU0sQ0FBRyxDQUFDLENBQUUsQ0FBQWhDLGNBQUEsR0FBQWlDLENBQUEsU0FBQWpDLGNBQUEsR0FBQUcsQ0FBQSxPQUMxQixNQUFPLENBQUFlLEdBQUcsQ0FBQ0UsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUNRLGFBQWEsQ0FBQyxDQUM5QyxDQUFDLElBQU0sQ0FBQTdCLGNBQUEsR0FBQWlDLENBQUEsU0FBQWpDLGNBQUEsR0FBQUcsQ0FBQSxPQUNILE1BQU8sQ0FBQWUsR0FBRyxDQUFDRSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQyxDQUFFQyxPQUFPLENBQUUsaUNBQWtDLENBQUMsQ0FBQyxDQUMvRSxDQUNKLENBQUUsTUFBT1AsS0FBSyxDQUFFLENBQUFmLGNBQUEsR0FBQUcsQ0FBQSxPQUNaLE1BQU8sQ0FBQWUsR0FBRyxDQUFDRSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQyxDQUFFQyxPQUFPLENBQUVQLEtBQUssQ0FBQ08sT0FBUSxDQUFDLENBQUMsQ0FDM0QsQ0FDSixDQUFDdEIsY0FBQSxHQUFBRyxDQUFBLE9BRUQrQixNQUFNLENBQUNDLE9BQU8sQ0FBRyxDQUNiN0IsUUFBUSxDQUFFVSxhQUFhLENBQUVPLFlBQVksQ0FBRUUsZ0JBQzNDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=